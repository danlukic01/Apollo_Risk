/* ============================================================================
   Apollo Risk - Dark Mode Theme
   ============================================================================ */

html.theme-dark {
    /* Dark mode colors */
    --bg-primary: #1A1A1A;
    --bg-secondary: #242424;
    --bg-card: #2D2D2D;
    --bg-input: #3D3D3D;
    --bg-hover: #3D3D3D;
    --bg-active: rgba(245, 158, 11, 0.15);
    --bg-sidebar: #1A1A1A;
    /* CRITICAL: Override app.css variables */
    --bg-white: #2D2D2D;
    --bg-light: #242424;
    --text-primary: #F5F5F5;
    --text-secondary: #A3A3A3;
    --text-muted: #737373;
    --text-light: #525252;
    --border-light: #3D3D3D;
    --border-medium: #525252;
    --border-color: #3D3D3D;
    --accent-primary: #FBBF24;
    --accent-primary-light: #FCD34D;
    --shadow-sm: 0 1px 2px rgba(0, 0, 0, 0.3);
    --shadow-md: 0 4px 6px -1px rgba(0, 0, 0, 0.4);
    --shadow-lg: 0 10px 40px rgba(0, 0, 0, 0.4);
    /* RADZEN CSS CUSTOM PROPERTIES OVERRIDE */
    --rz-base-background-color: #2D2D2D;
    --rz-base-color: #F5F5F5;
    --rz-grid-background-color: #2D2D2D;
    --rz-grid-header-background-color: #242424;
    --rz-grid-row-background-color: #2D2D2D;
    --rz-grid-row-hover-background-color: #2D2D2D;
    --rz-grid-cell-border-color: #3D3D3D;
    --rz-input-background-color: #3D3D3D;
    --rz-input-color: #F5F5F5;
    --rz-input-border-color: #525252;
    --rz-dropdown-background-color: #2D2D2D;
    --rz-dropdown-item-hover-background-color: #3D3D3D;
    --rz-pager-background-color: #2D2D2D;
    --rz-panel-background-color: #2D2D2D;
    --rz-card-background-color: #2D2D2D;
    --rz-text-color: #F5F5F5;
    --rz-text-secondary-color: #A3A3A3;
    --rz-border-color: #3D3D3D;
    --rz-on-background-color: #F5F5F5;
    --rz-background-color: #1A1A1A;
    --rz-secondary-background-color: #242424;
}

    /* ============================================================================
   BASE DARK MODE
   ============================================================================ */

    html.theme-dark body {
        background-color: var(--bg-primary);
        color: var(--text-primary);
    }

    html.theme-dark .page-wrapper {
        background-color: var(--bg-primary);
    }

    html.theme-dark .page-content {
        background-color: var(--bg-primary);
    }

    /* ============================================================================
   SIDEBAR - DARK MODE
   ============================================================================ */

    html.theme-dark .sidebar {
        background: linear-gradient(180deg, #1A1A1A 0%, #242424 100%) !important;
        border-right: 1px solid #3D3D3D;
    }

    html.theme-dark .sidebar-header {
        border-bottom: 1px solid #3D3D3D;
    }

    html.theme-dark .sidebar-logo h1 {
        color: #F5F5F5 !important;
    }

    html.theme-dark .sidebar-logo span {
        color: #FBBF24 !important;
    }

    html.theme-dark .nav-section-title {
        color: rgba(251, 191, 36, 0.8) !important;
    }

    html.theme-dark .nav-item {
        color: #A3A3A3 !important;
    }

        html.theme-dark .nav-item:hover {
            background: rgba(245, 158, 11, 0.1) !important;
            color: #F5F5F5 !important;
        }

        html.theme-dark .nav-item.active {
            background: linear-gradient(90deg, rgba(245, 158, 11, 0.2) 0%, rgba(245, 158, 11, 0.05) 100%) !important;
            color: #FBBF24 !important;
            border-left: 3px solid #FBBF24 !important;
        }

            html.theme-dark .nav-item.active .nav-icon {
                color: #FBBF24 !important;
            }

    html.theme-dark .nav-icon {
        color: #737373 !important;
    }

    html.theme-dark .nav-item:hover .nav-icon {
        color: #FBBF24 !important;
    }

    html.theme-dark .nav-expandable-header {
        color: #A3A3A3 !important;
    }

        html.theme-dark .nav-expandable-header:hover {
            background: rgba(245, 158, 11, 0.1) !important;
            color: #F5F5F5 !important;
        }

    html.theme-dark .nav-expandable-content {
        background: rgba(0, 0, 0, 0.2) !important;
        border-left: 1px solid #3D3D3D;
    }

    /* ============================================================================
   HEADER - DARK MODE
   ============================================================================ */

    html.theme-dark .header {
        background-color: var(--bg-secondary);
        border-bottom-color: var(--border-light);
    }

    html.theme-dark .welcome-text {
        color: var(--text-muted);
    }

    html.theme-dark .welcome-name {
        color: var(--text-primary);
    }

    html.theme-dark .user-profile-trigger:hover {
        background: var(--bg-hover);
        border-color: var(--border-medium);
    }

    html.theme-dark .user-name {
        color: var(--text-primary);
    }

    html.theme-dark .user-email {
        color: var(--text-muted);
    }

    html.theme-dark .dropdown-menu {
        background: var(--bg-card);
        border-color: var(--border-medium);
        box-shadow: var(--shadow-lg);
    }

    html.theme-dark .dropdown-header {
        background: linear-gradient(135deg, #2D2D2D 0%, #3D3D3D 100%);
    }

    html.theme-dark .dropdown-user-name {
        color: var(--text-primary);
    }

    html.theme-dark .dropdown-user-email {
        color: var(--text-muted);
    }

    html.theme-dark .dropdown-item {
        color: var(--text-secondary);
    }

        html.theme-dark .dropdown-item:hover {
            background: var(--bg-hover);
            color: var(--text-primary);
        }

    html.theme-dark .dropdown-divider {
        background: var(--border-light);
    }

    /* ============================================================================
   CARDS - DARK MODE
   ============================================================================ */

    html.theme-dark .card {
        background-color: var(--bg-card) !important;
        border-color: var(--border-light) !important;
    }

    html.theme-dark .card-header {
        background-color: var(--bg-card) !important;
        border-bottom-color: var(--border-light) !important;
    }

    html.theme-dark .card-body {
        background-color: var(--bg-card) !important;
    }

    html.theme-dark .card-title {
        color: var(--text-primary) !important;
    }

    html.theme-dark .kpi-card {
        background-color: var(--bg-card) !important;
        border-color: var(--border-light) !important;
    }

    html.theme-dark .kpi-value {
        color: var(--text-primary) !important;
    }

    html.theme-dark .kpi-label {
        color: var(--text-muted) !important;
    }

    /* ============================================================================
   FILTER BAR - DARK MODE
   ============================================================================ */

    html.theme-dark .filter-bar {
        background-color: var(--bg-card);
        border-color: var(--border-light);
    }

    html.theme-dark .filter-label {
        color: var(--text-muted);
    }

    /* ============================================================================
   TABLES - DARK MODE
   ============================================================================ */

    html.theme-dark .data-table th {
        background: linear-gradient(135deg, #2D2D2D 0%, #3D3D3D 100%) !important;
        color: var(--text-secondary);
        border-bottom-color: var(--border-light);
    }

    html.theme-dark .data-table td {
        color: var(--text-primary);
        border-bottom-color: var(--border-light);
    }

    html.theme-dark .data-table tbody tr:hover {
        background-color: var(--bg-card);
    }

    /* ============================================================================
   RADZEN COMPONENTS - DARK MODE (AGGRESSIVE TARGETING)
   ============================================================================ */

    /* Main DataGrid container */
    html.theme-dark .rz-data-grid,
    html.theme-dark .rz-datatable,
    html.theme-dark .rz-grid {
        background-color: var(--bg-card) !important;
        color: var(--text-primary) !important;
    }

    /* DataGrid wrapper elements */
    html.theme-dark .rz-data-grid-data,
    html.theme-dark .rz-datatable-wrapper,
    html.theme-dark .rz-datatable-scrollable-wrapper,
    html.theme-dark .rz-datatable-scrollable-view,
    html.theme-dark .rz-datatable-scrollable-body,
    html.theme-dark .rz-datatable-scrollable-table-wrapper {
        background-color: var(--bg-card) !important;
    }

    /* Table element */
    html.theme-dark .rz-data-grid table,
    html.theme-dark .rz-datatable table,
    html.theme-dark .rz-grid-table {
        background-color: var(--bg-card) !important;
    }

    /* Header row */
    html.theme-dark .rz-datatable-thead,
    html.theme-dark .rz-data-grid thead,
    html.theme-dark .rz-datatable thead {
        background: linear-gradient(135deg, #2D2D2D 0%, #3D3D3D 100%) !important;
    }

        /* Header cells - aggressive targeting */
        html.theme-dark .rz-datatable-thead th,
        html.theme-dark .rz-datatable-thead > tr > th,
        html.theme-dark .rz-data-grid th,
        html.theme-dark .rz-data-grid thead th,
        html.theme-dark .rz-column-title,
        html.theme-dark .rz-sortable-column,
        html.theme-dark .rz-header-cell {
            background: linear-gradient(135deg, #2D2D2D 0%, #3D3D3D 100%) !important;
            color: var(--text-secondary) !important;
            border-color: var(--border-light) !important;
        }

    html.theme-dark .rz-column-title-content,
    html.theme-dark .rz-cell-filter-content {
        color: var(--text-secondary) !important;
    }

    /* Body rows - aggressive targeting */
    html.theme-dark .rz-data-row,
    html.theme-dark .rz-datatable-tbody tr,
    html.theme-dark .rz-datatable tbody tr,
    html.theme-dark .rz-data-grid tbody tr,
    html.theme-dark .rz-data-grid tr {
        background-color: var(--bg-card) !important;
    }

        html.theme-dark .rz-data-row:hover,
        html.theme-dark .rz-datatable-tbody tr:hover,
        html.theme-dark .rz-datatable tbody tr:hover,
        html.theme-dark .rz-data-grid tbody tr:hover {
            background-color: var(--bg-card) !important;
        }

    /* Alternating rows if enabled */
    html.theme-dark .rz-datatable-even,
    html.theme-dark .rz-datatable-odd {
        background-color: var(--bg-card) !important;
    }

    /* Body cells - aggressive targeting */
    html.theme-dark .rz-cell,
    html.theme-dark .rz-cell-data,
    html.theme-dark .rz-datatable-tbody td,
    html.theme-dark .rz-datatable tbody td,
    html.theme-dark .rz-data-grid td,
    html.theme-dark .rz-data-grid tbody td {
        background-color: var(--bg-card) !important;
        color: var(--text-primary) !important;
        border-color: var(--border-light) !important;
    }

    /* Selected row */
    html.theme-dark .rz-state-highlight,
    html.theme-dark .rz-datatable-tbody tr.rz-state-highlight,
    html.theme-dark tr.rz-state-highlight {
        background-color: rgba(245, 158, 11, 0.15) !important;
    }

    /* Sort icons */
    html.theme-dark .rz-sortable-column .rz-sortable-column-icon,
    html.theme-dark .rz-sort-icon {
        color: var(--text-muted) !important;
    }

    /* Filter row */
    html.theme-dark .rz-datatable-filter-row,
    html.theme-dark .rz-filter-row {
        background-color: var(--bg-secondary) !important;
    }

    html.theme-dark .rz-cell-filter,
    html.theme-dark .rz-cell-filter input,
    html.theme-dark .rz-datatable .rz-textbox {
        background-color: var(--bg-input) !important;
        color: var(--text-primary) !important;
        border-color: var(--border-medium) !important;
    }

    /* Empty message */
    html.theme-dark .rz-datatable-emptymessage,
    html.theme-dark .rz-data-grid-empty {
        background-color: var(--bg-card) !important;
        color: var(--text-muted) !important;
    }

        html.theme-dark .rz-datatable-emptymessage td {
            background-color: var(--bg-card) !important;
            color: var(--text-muted) !important;
        }

    /* Pager / Footer */
    html.theme-dark .rz-pager,
    html.theme-dark .rz-paginator,
    html.theme-dark .rz-datatable-footer,
    html.theme-dark .rz-data-grid-footer {
        background-color: var(--bg-card) !important;
        border-color: var(--border-light) !important;
        color: var(--text-secondary) !important;
    }

    html.theme-dark .rz-pager-element,
    html.theme-dark .rz-paginator-element {
        color: var(--text-secondary) !important;
    }

    html.theme-dark .rz-pager-page,
    html.theme-dark .rz-paginator-page {
        color: var(--text-secondary) !important;
        background-color: transparent !important;
    }

        html.theme-dark .rz-pager-page:hover,
        html.theme-dark .rz-paginator-page:hover {
            background-color: var(--bg-hover) !important;
        }

        html.theme-dark .rz-pager-page.rz-state-active,
        html.theme-dark .rz-paginator-page.rz-state-active {
            background-color: var(--accent-primary) !important;
            color: #1A1A1A !important;
        }

    html.theme-dark .rz-pager-summary,
    html.theme-dark .rz-paginator-summary {
        color: var(--text-muted) !important;
    }

    html.theme-dark .rz-pager-first,
    html.theme-dark .rz-pager-prev,
    html.theme-dark .rz-pager-next,
    html.theme-dark .rz-pager-last,
    html.theme-dark .rz-paginator-first,
    html.theme-dark .rz-paginator-prev,
    html.theme-dark .rz-paginator-next,
    html.theme-dark .rz-paginator-last {
        color: var(--text-secondary) !important;
    }

        html.theme-dark .rz-pager-first:hover,
        html.theme-dark .rz-pager-prev:hover,
        html.theme-dark .rz-pager-next:hover,
        html.theme-dark .rz-pager-last:hover {
            background-color: var(--bg-hover) !important;
        }

    html.theme-dark .rz-dropdown {
        background-color: var(--bg-input) !important;
        border-color: var(--border-medium) !important;
        color: var(--text-primary) !important;
    }

        html.theme-dark .rz-dropdown .rz-inputtext,
        html.theme-dark .rz-dropdown .rz-dropdown-label {
            color: var(--text-primary) !important;
        }

        html.theme-dark .rz-dropdown:hover {
            border-color: var(--accent-primary) !important;
        }

    html.theme-dark .rz-dropdown-panel {
        background-color: var(--bg-card) !important;
        border-color: var(--border-medium) !important;
    }

    html.theme-dark .rz-dropdown-item {
        color: var(--text-primary) !important;
    }

        html.theme-dark .rz-dropdown-item:hover {
            background-color: var(--bg-hover) !important;
        }

        html.theme-dark .rz-dropdown-item.rz-state-highlight {
            background-color: var(--accent-primary) !important;
            color: #1A1A1A !important;
        }

    html.theme-dark .rz-textbox {
        background-color: var(--bg-input) !important;
        border-color: var(--border-medium) !important;
        color: var(--text-primary) !important;
    }

        html.theme-dark .rz-textbox:focus {
            border-color: var(--accent-primary) !important;
        }

    html.theme-dark .rz-textarea {
        background-color: var(--bg-input) !important;
        border-color: var(--border-medium) !important;
        color: var(--text-primary) !important;
    }

    html.theme-dark .rz-spinner,
    html.theme-dark .rz-numeric {
        background-color: var(--bg-input) !important;
        border-color: var(--border-medium) !important;
        color: var(--text-primary) !important;
    }

    html.theme-dark .rz-datepicker {
        background-color: var(--bg-input) !important;
        border-color: var(--border-medium) !important;
        color: var(--text-primary) !important;
    }

    html.theme-dark .rz-datepicker-panel {
        background-color: var(--bg-card) !important;
        border-color: var(--border-medium) !important;
    }

    html.theme-dark .rz-datepicker-calendar td {
        color: var(--text-primary) !important;
    }

        html.theme-dark .rz-datepicker-calendar td:hover {
            background-color: var(--bg-hover) !important;
        }

    html.theme-dark .rz-datepicker-calendar .rz-state-active {
        background-color: var(--accent-primary) !important;
        color: #1A1A1A !important;
    }

    html.theme-dark .rz-dialog {
        background-color: var(--bg-card);
        border-color: var(--border-medium);
    }

    html.theme-dark .rz-dialog-titlebar {
        background: linear-gradient(135deg, #2D2D2D 0%, #3D3D3D 100%);
        border-bottom-color: var(--border-light);
    }

    html.theme-dark .rz-dialog-title {
        color: var(--text-primary);
    }

    html.theme-dark .rz-dialog-content {
        background-color: var(--bg-card);
        color: var(--text-primary);
    }

    html.theme-dark .rz-button-primary {
        background: linear-gradient(135deg, var(--accent-primary) 0%, #D97706 100%) !important;
    }

    /* Light/Cancel button - ULTRA NUCLEAR targeting */
    html.theme-dark .rz-button-light,
    html.theme-dark .rz-button.rz-button-light,
    html.theme-dark button.rz-button-light,
    html.theme-dark .modal-footer .rz-button-light,
    html.theme-dark .modal-footer button.rz-button-light,
    html.theme-dark .rz-variant-flat,
    html.theme-dark .rz-button.rz-variant-flat,
    html.theme-dark .rz-variant-text,
    html.theme-dark .rz-shade-light,
    html.theme-dark .rz-shade-default:not(.rz-primary):not(.rz-danger):not(.rz-success):not(.rz-warning):not(.rz-info),
    html.theme-dark [class*="rz-button"][class*="light"],
    html.theme-dark .modal-overlay .rz-button-light,
    html.theme-dark .modal-dialog .rz-button-light,
    html.theme-dark .modal-dialog .rz-button.rz-variant-flat,
    html.theme-dark .modal-overlay .rz-button.rz-variant-flat,
    html.theme-dark .modal-footer .rz-button.rz-variant-flat,
    html.theme-dark .rz-button:not(.rz-primary):not(.rz-danger):not(.rz-success):not(.rz-info):not(.rz-warning):not(.rz-secondary):not(.rz-button-primary):not(.rz-button-danger) {
        background-color: #3D3D3D !important;
        background: #3D3D3D !important;
        border-color: #525252 !important;
        color: #A3A3A3 !important;
    }

        html.theme-dark .rz-button-light:hover,
        html.theme-dark .rz-button.rz-button-light:hover,
        html.theme-dark button.rz-button-light:hover,
        html.theme-dark .modal-footer .rz-button-light:hover,
        html.theme-dark .rz-variant-flat:hover,
        html.theme-dark .rz-button.rz-variant-flat:hover,
        html.theme-dark .rz-variant-text:hover,
        html.theme-dark .rz-shade-light:hover,
        html.theme-dark [class*="rz-button"][class*="light"]:hover,
        html.theme-dark .modal-overlay .rz-button-light:hover,
        html.theme-dark .modal-dialog .rz-button-light:hover,
        html.theme-dark .modal-dialog .rz-button.rz-variant-flat:hover,
        html.theme-dark .modal-overlay .rz-button.rz-variant-flat:hover,
        html.theme-dark .modal-footer .rz-button.rz-variant-flat:hover {
            background-color: #525252 !important;
            background: #525252 !important;
            border-color: #FBBF24 !important;
            color: #FBBF24 !important;
        }

    /* Secondary button */
    html.theme-dark .rz-button-secondary,
    html.theme-dark .rz-button.rz-button-secondary,
    html.theme-dark button.rz-button-secondary,
    html.theme-dark [class*="rz-button"][class*="secondary"] {
        background-color: #3D3D3D !important;
        background: #3D3D3D !important;
        border-color: #525252 !important;
        color: #A3A3A3 !important;
    }

        html.theme-dark .rz-button-secondary:hover,
        html.theme-dark .rz-button.rz-button-secondary:hover,
        html.theme-dark button.rz-button-secondary:hover,
        html.theme-dark [class*="rz-button"][class*="secondary"]:hover {
            background-color: #525252 !important;
            background: #525252 !important;
            border-color: #FBBF24 !important;
            color: #FBBF24 !important;
        }

    /* Danger button for delete dialogs */
    html.theme-dark .rz-button-danger,
    html.theme-dark .rz-button.rz-button-danger,
    html.theme-dark button.rz-button-danger {
        background: linear-gradient(135deg, #EF4444 0%, #DC2626 100%) !important;
        border-color: #EF4444 !important;
        color: white !important;
    }

        html.theme-dark .rz-button-danger:hover {
            background: linear-gradient(135deg, #DC2626 0%, #B91C1C 100%) !important;
        }

    /* Radzen button inner content */
    html.theme-dark .rz-button-light .rz-button-text,
    html.theme-dark .rz-button-light span,
    html.theme-dark .rz-button-secondary .rz-button-text,
    html.theme-dark .rz-button-secondary span {
        color: inherit !important;
    }

    /* Generic button inside modals */
    html.theme-dark .modal-footer .rz-button,
    html.theme-dark .modal-footer button {
        background-color: var(--bg-input) !important;
        border-color: var(--border-medium) !important;
        color: var(--text-secondary) !important;
    }

        html.theme-dark .modal-footer .rz-button-primary,
        html.theme-dark .modal-footer button.rz-button-primary {
            background: linear-gradient(135deg, var(--accent-primary) 0%, #D97706 100%) !important;
            border-color: var(--accent-primary) !important;
            color: #1A1A1A !important;
        }

        html.theme-dark .modal-footer .rz-button-danger,
        html.theme-dark .modal-footer button.rz-button-danger {
            background: linear-gradient(135deg, #EF4444 0%, #DC2626 100%) !important;
            border-color: #EF4444 !important;
            color: white !important;
        }

    /* Radzen button box - sometimes wraps the button */
    html.theme-dark .rz-button-box {
        background-color: transparent !important;
    }

    html.theme-dark .rz-pager {
        background-color: var(--bg-card);
        border-top-color: var(--border-light);
    }

    html.theme-dark .rz-pager-page {
        color: var(--text-secondary);
    }

        html.theme-dark .rz-pager-page:hover {
            background-color: var(--bg-hover);
        }

    html.theme-dark .rz-state-active {
        background-color: var(--accent-primary) !important;
        color: #1A1A1A !important;
    }

    /* ============================================================================
   CHARTS - DARK MODE
   ============================================================================ */

    html.theme-dark .chart-container {
        background-color: var(--bg-card) !important;
        border-color: var(--border-light) !important;
    }

    html.theme-dark .chart-title {
        color: var(--text-primary) !important;
    }

    html.theme-dark .rz-chart {
        background-color: transparent !important;
    }

        html.theme-dark .rz-chart svg text {
            fill: var(--text-muted) !important;
        }

        html.theme-dark .rz-chart .rz-axis line,
        html.theme-dark .rz-chart .rz-grid line {
            stroke: var(--border-light) !important;
        }

    html.theme-dark .rz-legend {
        color: var(--text-secondary) !important;
    }

    html.theme-dark .rz-legend-item-text {
        color: var(--text-secondary) !important;
    }

    /* Progress bar / loading indicators */
    html.theme-dark .rz-progressbar {
        background-color: var(--bg-input) !important;
    }

    html.theme-dark .rz-progressbar-value {
        background: linear-gradient(135deg, var(--accent-primary) 0%, #D97706 100%) !important;
    }

    /* ============================================================================
   BUTTONS - DARK MODE
   ============================================================================ */

    html.theme-dark .btn-secondary {
        background-color: var(--bg-input);
        border-color: var(--border-medium);
        color: var(--text-secondary);
    }

        html.theme-dark .btn-secondary:hover {
            background-color: var(--bg-hover);
            border-color: var(--accent-primary);
            color: var(--accent-primary);
        }

    /* ============================================================================
   EMPTY STATES - DARK MODE
   ============================================================================ */

    html.theme-dark .empty-state h3 {
        color: var(--text-primary);
    }

    html.theme-dark .empty-state p {
        color: var(--text-secondary);
    }

    html.theme-dark .empty-icon {
        background-color: var(--bg-input);
        color: var(--text-muted);
    }

    /* ============================================================================
   CHAT WIDGET - DARK MODE
   ============================================================================ */

    html.theme-dark .chat-container {
        background: var(--bg-secondary) !important;
    }

    html.theme-dark .chat-messages {
        background: var(--bg-primary) !important;
    }

    html.theme-dark .chat-header {
        background: linear-gradient(135deg, #2D2D2D 0%, #3D3D3D 100%);
        border-bottom-color: var(--border-light);
    }

    html.theme-dark .chat-input {
        background: var(--bg-primary) !important;
        border-top-color: var(--border-light) !important;
    }

    html.theme-dark .input-wrapper {
        background: var(--bg-secondary) !important;
        border-color: var(--border-light) !important;
    }

        html.theme-dark .chat-input input,
        html.theme-dark .chat-input textarea,
        html.theme-dark .input-wrapper input,
        html.theme-dark .input-wrapper textarea {
            background: transparent !important;
            color: var(--text-primary) !important;
            -webkit-text-fill-color: var(--text-primary) !important;
        }

            html.theme-dark .chat-input textarea::placeholder,
            html.theme-dark .input-wrapper textarea::placeholder {
                color: var(--text-muted) !important;
                -webkit-text-fill-color: var(--text-muted) !important;
            }

    html.theme-dark .message.assistant .message-text {
        background: var(--bg-card) !important;
        color: var(--text-primary) !important;
    }

    html.theme-dark .welcome-message h4 {
        color: var(--text-primary) !important;
    }

    html.theme-dark .welcome-message p {
        color: var(--text-secondary) !important;
    }

    html.theme-dark .chip {
        background: var(--bg-card);
        border-color: var(--border-light);
        color: var(--text-secondary);
    }

        html.theme-dark .chip:hover {
            background: var(--bg-hover);
            border-color: var(--accent-primary);
            color: var(--accent-primary);
        }

    /* ============================================================================
   PAGE CARDS - DARK MODE (filter-card, data-card, summary-card)
   ============================================================================ */

    html.theme-dark .filter-card,
    html.theme-dark .data-card,
    html.theme-dark .summary-card {
        background: var(--bg-card) !important;
        border-color: var(--border-light) !important;
    }

        html.theme-dark .filter-card label,
        html.theme-dark .filter-item label {
            color: var(--text-muted) !important;
        }

        html.theme-dark .card-header h3,
        html.theme-dark .data-card h3 {
            color: var(--text-primary) !important;
        }

    html.theme-dark .summary-value,
    html.theme-dark .summary-content span {
        color: var(--text-primary) !important;
    }

    html.theme-dark .summary-label {
        color: var(--text-muted) !important;
    }

    /* ============================================================================
   RADZEN DATAGRID - COMPREHENSIVE DARK MODE
   ============================================================================ */

    html.theme-dark .rz-grid,
    html.theme-dark .rz-data-grid,
    html.theme-dark .rz-datatable-wrapper {
        background-color: var(--bg-card) !important;
    }

    html.theme-dark .rz-datatable-data {
        background-color: var(--bg-card) !important;
    }

    html.theme-dark .rz-datatable-thead > tr > th {
        background: linear-gradient(135deg, #2D2D2D 0%, #3D3D3D 100%) !important;
        color: var(--text-secondary) !important;
        border-color: var(--border-light) !important;
    }

    html.theme-dark .rz-datatable-tbody > tr {
        background-color: var(--bg-card) !important;
    }

        html.theme-dark .rz-datatable-tbody > tr:hover {
            background-color: var(--bg-card) !important;
        }

        html.theme-dark .rz-datatable-tbody > tr > td {
            color: var(--text-primary) !important;
            border-color: var(--border-light) !important;
        }

    html.theme-dark .rz-sortable-column:hover {
        background-color: var(--bg-hover) !important;
    }

    html.theme-dark .rz-column-title-content {
        color: var(--text-secondary) !important;
    }

    html.theme-dark .rz-datatable .rz-cell-filter {
        background-color: var(--bg-input) !important;
        border-color: var(--border-medium) !important;
    }

        html.theme-dark .rz-datatable .rz-cell-filter input,
        html.theme-dark .rz-datatable .rz-cell-filter .rz-textbox {
            background-color: var(--bg-input) !important;
            color: var(--text-primary) !important;
            border-color: var(--border-medium) !important;
        }

    html.theme-dark .rz-grid-table {
        background-color: var(--bg-card) !important;
    }

    /* Pager dark mode */
    html.theme-dark .rz-pager,
    html.theme-dark .rz-paginator {
        background-color: var(--bg-card) !important;
        border-color: var(--border-light) !important;
        color: var(--text-secondary) !important;
    }

    html.theme-dark .rz-pager-summary {
        color: var(--text-muted) !important;
    }

    html.theme-dark .rz-pager-page,
    html.theme-dark .rz-paginator-page {
        color: var(--text-secondary) !important;
    }

        html.theme-dark .rz-pager-page:hover,
        html.theme-dark .rz-paginator-page:hover {
            background-color: var(--bg-hover) !important;
        }

    html.theme-dark .rz-pager-first,
    html.theme-dark .rz-pager-prev,
    html.theme-dark .rz-pager-next,
    html.theme-dark .rz-pager-last {
        color: var(--text-secondary) !important;
    }

    /* ============================================================================
   LOADING STATES - DARK MODE
   ============================================================================ */

    html.theme-dark .loading-container {
        color: var(--text-muted) !important;
    }

        html.theme-dark .loading-container span {
            color: var(--text-muted) !important;
        }

    /* ============================================================================
   MODAL DIALOGS - DARK MODE
   ============================================================================ */

    html.theme-dark .modal-dialog {
        background: var(--bg-card) !important;
    }

    html.theme-dark .modal-body {
        background: var(--bg-card) !important;
        color: var(--text-primary) !important;
    }

        html.theme-dark .modal-body p {
            color: var(--text-secondary) !important;
        }

    html.theme-dark .modal-footer {
        background: var(--bg-secondary) !important;
        border-color: var(--border-light) !important;
    }

    html.theme-dark .delete-details {
        background: var(--bg-secondary) !important;
        border-color: var(--border-light) !important;
        color: var(--text-primary) !important;
    }

    html.theme-dark .form-group label {
        color: var(--text-secondary) !important;
    }

    /* ============================================================================
   PAGE HEADERS - DARK MODE
   ============================================================================ */

    html.theme-dark .page-header h1 {
        color: var(--text-primary) !important;
    }

    html.theme-dark .page-header p {
        color: var(--text-muted) !important;
    }

    html.theme-dark .header-content h1 {
        color: var(--text-primary) !important;
    }

    html.theme-dark .header-content p {
        color: var(--text-muted) !important;
    }

    /* ============================================================================
   TEXT AND BADGES - DARK MODE
   ============================================================================ */

    html.theme-dark .risk-name,
    html.theme-dark .category-name,
    html.theme-dark .activity-title {
        color: var(--text-primary) !important;
    }

    html.theme-dark .risk-meta,
    html.theme-dark .category-desc,
    html.theme-dark .activity-meta {
        color: var(--text-muted) !important;
    }

    html.theme-dark .record-count {
        background: var(--bg-secondary) !important;
        color: var(--text-muted) !important;
    }

    /* ============================================================================
   ACTIVITY ITEMS - DARK MODE
   ============================================================================ */

    html.theme-dark .activity-item {
        background: var(--bg-secondary) !important;
    }

        html.theme-dark .activity-item:hover {
            background: var(--bg-hover) !important;
        }

    /* ============================================================================
   VARIANCE REPORT SPECIFIC - DARK MODE
   ============================================================================ */

    html.theme-dark .variance-cell {
        color: var(--text-primary) !important;
    }

    html.theme-dark .risk-name-cell .risk-name {
        color: var(--text-primary) !important;
    }

    html.theme-dark .risk-name-cell .risk-meta {
        color: var(--text-muted) !important;
    }

    /* ============================================================================
   INFO GRID - DARK MODE
   ============================================================================ */

    html.theme-dark .info-item {
        background: var(--bg-secondary) !important;
    }

    html.theme-dark .info-label {
        color: var(--text-muted) !important;
    }

    html.theme-dark .info-value {
        color: var(--text-primary) !important;
    }

    /* ============================================================================
   PROFILE PAGE - DARK MODE
   ============================================================================ */

    html.theme-dark .detail-group {
        background: var(--bg-secondary) !important;
    }

    html.theme-dark .detail-content label {
        color: var(--text-muted) !important;
    }

    html.theme-dark .detail-content span {
        color: var(--text-primary) !important;
    }

    html.theme-dark .action-item {
        background: var(--bg-secondary) !important;
    }

        html.theme-dark .action-item:hover {
            background: var(--bg-hover) !important;
        }

    html.theme-dark .action-title {
        color: var(--text-primary) !important;
    }

    html.theme-dark .action-description {
        color: var(--text-muted) !important;
    }

    html.theme-dark .profile-header-section {
        background: transparent !important;
    }

    html.theme-dark .profile-name-section h2 {
        color: var(--text-primary) !important;
    }

    /* ============================================================================
   QUICK ACTIONS - DARK MODE
   ============================================================================ */

    html.theme-dark .quick-actions .action-item {
        background: var(--bg-secondary) !important;
    }

        html.theme-dark .quick-actions .action-item:hover {
            background: rgba(245, 158, 11, 0.1) !important;
        }

    /* ============================================================================
   RADZEN DATAGRID - NUCLEAR OPTION (Maximum Specificity)
   ============================================================================ */

    /* Target ALL elements that could be white inside cards */
    html.theme-dark .card table,
    html.theme-dark .card tbody,
    html.theme-dark .card thead,
    html.theme-dark .card tr,
    html.theme-dark .card td,
    html.theme-dark .card th,
    html.theme-dark .card-body table,
    html.theme-dark .card-body tbody,
    html.theme-dark .card-body thead,
    html.theme-dark .card-body tr,
    html.theme-dark .card-body td,
    html.theme-dark .card-body th {
        background-color: var(--bg-card) !important;
        color: var(--text-primary) !important;
    }

        html.theme-dark .card thead,
        html.theme-dark .card thead tr,
        html.theme-dark .card thead th,
        html.theme-dark .card-body thead,
        html.theme-dark .card-body thead tr,
        html.theme-dark .card-body thead th {
            background-color: #242424 !important;
            color: var(--text-secondary) !important;
        }

    /* Target ALL white backgrounds inside RadzenDataGrid */
    html.theme-dark .rz-data-grid,
    html.theme-dark .rz-data-grid *,
    html.theme-dark [class*="rz-data"],
    html.theme-dark [class*="rz-grid"],
    html.theme-dark [class*="rz-datatable"] {
        background-color: var(--bg-card) !important;
    }

        /* Specific table elements */
        html.theme-dark .rz-data-grid table,
        html.theme-dark .rz-data-grid tbody,
        html.theme-dark .rz-data-grid tr,
        html.theme-dark .rz-data-grid td,
        html.theme-dark .rz-datatable table,
        html.theme-dark .rz-datatable tbody,
        html.theme-dark .rz-datatable tr,
        html.theme-dark .rz-datatable td {
            background-color: var(--bg-card) !important;
            color: var(--text-primary) !important;
            border-color: var(--border-light) !important;
        }

        /* Header must stay darker */
        html.theme-dark .rz-data-grid thead,
        html.theme-dark .rz-data-grid thead tr,
        html.theme-dark .rz-data-grid thead th,
        html.theme-dark .rz-datatable thead,
        html.theme-dark .rz-datatable thead tr,
        html.theme-dark .rz-datatable thead th,
        html.theme-dark .rz-datatable-thead,
        html.theme-dark .rz-datatable-thead tr,
        html.theme-dark .rz-datatable-thead th {
            background: #242424 !important;
            background-color: #242424 !important;
            color: var(--text-secondary) !important;
            border-color: var(--border-light) !important;
        }

        /* Row hover - disabled */
        html.theme-dark .rz-data-grid tbody tr:hover,
        html.theme-dark .rz-data-grid tbody tr:hover td,
        html.theme-dark .rz-datatable tbody tr:hover,
        html.theme-dark .rz-datatable tbody tr:hover td {
            background-color: var(--bg-card) !important;
        }

    /* Pager area */
    html.theme-dark .rz-pager,
    html.theme-dark .rz-pager *,
    html.theme-dark .rz-paginator,
    html.theme-dark .rz-paginator *,
    html.theme-dark .rz-data-grid-footer,
    html.theme-dark .rz-data-grid-footer * {
        background-color: var(--bg-card) !important;
        color: var(--text-secondary) !important;
        border-color: var(--border-light) !important;
    }

        /* Active page number */
        html.theme-dark .rz-state-active,
        html.theme-dark .rz-pager .rz-state-active {
            background-color: var(--accent-primary) !important;
            color: #1A1A1A !important;
        }

    /* Scrollable wrapper - often missed */
    html.theme-dark .rz-datatable-scrollable-wrapper,
    html.theme-dark .rz-datatable-scrollable-view,
    html.theme-dark .rz-datatable-scrollable-body,
    html.theme-dark .rz-datatable-scrollable-header,
    html.theme-dark .rz-datatable-wrapper {
        background-color: var(--bg-card) !important;
    }

    /* Card body containing data grid */
    html.theme-dark .card-body,
    html.theme-dark .card .card-body,
    html.theme-dark div.card-body {
        background-color: var(--bg-card) !important;
    }

/* ============================================================================
   TRANSITIONS
   ============================================================================ */

html,
body,
.main-content,
.sidebar,
.card,
.kpi-card,
.filter-bar,
.filter-card,
.data-card,
.summary-card,
.header,
.rz-datatable,
.rz-dropdown,
.rz-dialog,
.chart-container,
.modal-dialog,
.activity-item,
.detail-group,
.action-item {
    transition: background-color 0.3s ease, color 0.3s ease, border-color 0.3s ease;
}

    /* ============================================================================
   CHAT WIDGET SUGGESTIONS - DARK MODE
   ============================================================================ */

    html.theme-dark .suggestions-container {
        background: #1A1A1A !important;
        border-top-color: #3D3D3D !important;
    }

    html.theme-dark .suggestions-label {
        color: #A3A3A3 !important;
    }

    html.theme-dark .suggestion-btn {
        background: #2D2D2D !important;
        border-color: #3D3D3D !important;
        color: #F5F5F5 !important;
    }

        html.theme-dark .suggestion-btn svg {
            color: #F59E0B !important;
            stroke: #F59E0B !important;
        }

        html.theme-dark .suggestion-btn:hover {
            background: #3D2A10 !important;
            border-color: #F59E0B !important;
            color: #FBBF24 !important;
        }

            html.theme-dark .suggestion-btn:hover svg {
                color: #FBBF24 !important;
                stroke: #FBBF24 !important;
            }

    /* ============================================================================
   CHAT WIDGET VOICE BUTTON - DARK MODE
   ============================================================================ */

    html.theme-dark .voice-btn {
        background: #2D2D2D !important;
        border-color: #3D3D3D !important;
        color: #A3A3A3 !important;
    }

        html.theme-dark .voice-btn:hover:not(:disabled) {
            background: #3D2A10 !important;
            border-color: #F59E0B !important;
            color: #F59E0B !important;
        }

        html.theme-dark .voice-btn.recording {
            background: #7f1d1d !important;
            border-color: #ef4444 !important;
            color: #fca5a5 !important;
        }

    html.theme-dark .voice-error {
        background: #450a0a !important;
        color: #fca5a5 !important;
    }

    /* Quick Add Score Button - Dark Mode */
    html.theme-dark .btn-add-score {
        background: linear-gradient(135deg, #d97706 0%, #b45309 100%) !important;
    }

        html.theme-dark .btn-add-score:hover {
            background: linear-gradient(135deg, #b45309 0%, #92400e 100%) !important;
        }

    html.theme-dark .quick-add-selectors .score-hint {
        color: var(--text-muted) !important;
    }
